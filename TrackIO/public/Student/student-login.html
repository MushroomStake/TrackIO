<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Login</title>
    <link rel="stylesheet" href="../styles.css">
    <script type="module" src="firebaseauth.js" defer></script>
  
</head>

<body>
      <!-- Aaccount filter Dropdown -->
         <div class="dropdown">
            <span>Account Filter</span>
                <div class="dropdown-content">
                   
                            <a href="student-login.html" aria-label="Student Login">
                                    <img src="../img/student-icon.png" alt="Student Logo" class="logo-icon">
                                    <span>Student</span>
                            </a>
                             <a href="../Company/company-index.html" aria-label="Company Login">
                                 <img src="../img/company-icon.png" alt="Company Logo" class="logo-icon">
                                <span>Company</span>
                            </a>
                                <a href="../Teacher/Teacher-login.html" aria-label="Faculty Login">
                                    <img src="../img/faculty-icon.png" alt="Faculty Logo" class="logo-icon">
                                     <span>Faculty</span>
                                </a>      
                </div>
            </div>
            
    
     <div class="logo">
        <div class="logo-container">
            <img src="../img/logo1.png" alt="TrackIO Logo" class="main-logo">
            <img src="../img/gc-ccs.png" alt="GC-CCS Icon" class="secondary-logo">
        </div>
    </div>
    <div class="form-container" id="form-container">
        <!-- Login Form -->
        <div id="login-form-container">
            <h2>Student Login</h2>
            <form id="studentLoginForm">
                <div class="email-input-container">
                    <input type="text" id="lStudentNumber" placeholder="Student Number" required />
                    <span class="domain-suffix">@gordoncollege.edu.ph</span>
                </div>
                <div id="loginEmailError" class="error-message"></div>
                <input type="password" id="lPassword" placeholder="Password" required />
                <button type="submit" id="submitLogin">Login</button>
                <div id="loginMessage" class="hidden"></div>
                <!-- Hidden email field for Firebase auth -->
                <input type="hidden" id="lEmail" />
            </form>
            <div class="toggle-link">
                <p>Don't have an account? <a href="student-register.html">Register</a></p>
            </div>
       
  </div>
</div>
            <!-- Clickable Logos Section -->
            

    <!-- Firebase Setup -->
    <script type="module">
        import { initializeApp, getApp, getApps } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
    
        // Firebase config
        const firebaseConfig = {
          apiKey: "AIzaSyC9z8Amm-vlNcbw-XqEnrkt_WpWHaGfwtQ",
          authDomain: "trackio-f5b07.firebaseapp.com",
          projectId: "trackio-f5b07",
          storageBucket: "trackio-f5b07.appspot.com",
          messagingSenderId: "1083789426923",
          appId: "1:1083789426923:web:c372749a28e84ff9cd7eae"
        };
    
        // Initialize Firebase (only if not already initialized)
        const app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApp();
        const auth = getAuth(app);
        const db = getFirestore(app);
    
        // Student number validation
        const studentNumberInput = document.getElementById("lStudentNumber");
        const loginEmailError = document.getElementById("loginEmailError");
        
        if (studentNumberInput) {
            studentNumberInput.addEventListener("input", function() {
                // Validate student number (only numbers)
                if (!/^\d*$/.test(this.value)) {
                    loginEmailError.textContent = "Student number should contain only numbers";
                    this.value = this.value.replace(/\D/g, '');
                } else {
                    loginEmailError.textContent = "";
                }
            });
        }
    </script>
    
</body>

</html>
